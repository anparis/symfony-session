{% extends 'base.html.twig' %}

{% block title %}Detail de la session{% endblock %}

{% block body %}
<main>
  <p>A partir du {{ session.dateDebut | format_datetime('long', 'none', locale='fr') }}</p>
  <h1>{{session.titre}}</h1>
  {% if session.programmes is not empty %}

    <div class="modules-list">
      {% set break = false %}
      {% for categorie in categories %}
      {% if not break %}
      <article>
        <h4>{{categorie}}</h4>
        <hr>
        {% for programme in session.programmes %}
          {% if categorie == programme.module.categorie %}
            <ul>
                  <li>{{ programme.module }} : {{programme.nbJours}} jours</li>
            </ul>
          {% endif %}
        {% endfor %}
        </article>
        {% endif %}
      {% endfor %}
    </div>
  {% else %}
    <p>La session ne possède pas de modules.</p>
  {% endif %}
  <button>Ajouter un module</button>


  <br>
  <div class="stagiaires-registered">
    <article>
      <h4>Stagiaires inscrits</h4>
      {% for stagiaire in session.stagiaires %}
      <ul>
        <li><a href="{{path('show_stagiaire', {'id': stagiaire.id})}}">{{stagiaire}}</a></li>
        <button class="btn-delete"><a href="{{path('del_session_stagiaire', {'idSe': session.id, 'idSt': stagiaire.id} )}}">supprimer</a></button>
      </ul>
      {% endfor %}
    </article>
  </div>
  <div class="stagiaires-non-registered">
    <article>
      <h4>Stagiaires non inscrits</h4>
      {% for stagiaire in nonRegistered %}
      <ul>
        <li><a href="{{path('show_stagiaire', {'id': stagiaire.id})}}">{{stagiaire}}</a></li>
        <button class="btn-add"><a href="{{path('add_session_stagiaire', {'idSe': session.id, 'idSt': stagiaire.id} )}}">ajouter à la session</a></button>
      </ul>
      {% endfor %}
    </article>
  </div>
</main>
{% endblock %}